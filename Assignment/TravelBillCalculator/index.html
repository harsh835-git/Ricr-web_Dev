<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Travel Bill Calculator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: #f4f7fb;
        }
        .total-amount {
            font-size: 2rem;
            font-weight: bold;
            color: #198754;
        }
        .breakdown-item {
            background: #f8f9fa;
            border-radius: 6px;
            padding: 8px 12px;
            margin-bottom: 6px;
        }
    </style>
</head>
<body>

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">

            <div class="card shadow">
                <div class="card-header text-center fw-bold">
                    Travel Bill Calculator
                </div>

                <div class="card-body">

                    <!-- Input -->
                    <div class="mb-3">
                        <label class="form-label">Kilometers Covered</label>
                        <input type="number" step="any" id="kmInput" class="form-control" placeholder="Enter kilometers">
                        <div id="errorMsg" class="text-danger mt-1"></div>
                    </div>

                    <!-- Button -->
                    <button class="btn btn-primary w-100 mb-3" id="calculateBtn">
                        Calculate Bill
                    </button>

                    <!-- Result -->
                    <div id="resultSection" class="d-none">
                        <hr>
                        <div class="text-center mb-3">
                            <div>Total Bill</div>
                            <div class="total-amount" id="totalBill">Rs. 0</div>
                        </div>

                        <h6>Breakdown</h6>
                        <div id="breakdown"></div>
                    </div>

                </div>
            </div>

        </div>
    </div>
</div>

<script>
    const kmInput = document.getElementById('kmInput');
    const errorMsg = document.getElementById('errorMsg');
    const resultSection = document.getElementById('resultSection');
    const totalBillEl = document.getElementById('totalBill');
    const breakdownEl = document.getElementById('breakdown');

    const formatter = new Intl.NumberFormat('en-IN');

    function calculateTravelBill(km) {
        const slabs = [
            { limit: 10, rate: 11 },
            { limit: 40, rate: 10 },
            { limit: Infinity, rate: 9 }
        ];

        let remainingKm = km;
        let total = 0;
        const breakdown = [];

        for (let slab of slabs) {
            if (remainingKm <= 0) break;

            const chargedKm = Math.min(remainingKm, slab.limit);
            const cost = chargedKm * slab.rate;

            breakdown.push({
                km: chargedKm,
                rate: slab.rate,
                cost: cost
            });

            total += cost;
            remainingKm -= chargedKm;
        }

        return { total, breakdown };
    }

    document.getElementById('calculateBtn').addEventListener('click', () => {
        errorMsg.textContent = '';
        resultSection.classList.add('d-none');

        const km = Number(kmInput.value);

        // Validation
        if (kmInput.value === '' || isNaN(km) || km < 0) {
            errorMsg.textContent = 'Please enter a non-negative number of kilometres';
            return;
        }

        const result = calculateTravelBill(km);

        totalBillEl.textContent = 'Rs. ' + formatter.format(result.total.toFixed(2));

        breakdownEl.innerHTML = '';
        result.breakdown.forEach(item => {
            const div = document.createElement('div');
            div.className = 'breakdown-item';
            div.textContent = `${item.km} km Ã— Rs.${item.rate} = Rs.${formatter.format(item.cost.toFixed(2))}`;
            breakdownEl.appendChild(div);
        });

        resultSection.classList.remove('d-none');
    });
</script>

</body>
</html>
